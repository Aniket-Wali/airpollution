<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
	<head>
		<meta charset="utf-8" >
		<title>Air Pollution</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- Google Fonts -->
				<link href="https://fonts.googleapis.com/css?family=DM+Sans:100,200,300,400,600,500,700,800,900|DM+Sans:100,200,300,400,500,600,700,800,900&amp;subset=latin" rel="stylesheet">
				<!-- Bootstrap 4.3.1 CSS -->
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
		<!-- Slick 1.8.1 jQuery plugin CSS (Sliders) -->
		<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
		<!-- Fancybox 3 jQuery plugin CSS (Open images and video in popup) -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
		<!-- AOS 2.3.4 jQuery plugin CSS (Animations) -->
		<link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet">
		<!-- FontAwesome CSS -->
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
		<!-- Startup 3 CSS (Styles for all blocks) -->
					<link href="{% static 'css/style.css' %}" rel="stylesheet" />
				<!-- jQuery 3.3.1 -->
		<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
			</head>
	<body>
<!-- Navigation Mobile type 1 -->


<!-- Header 1 -->

<header class="pt-195 pb-110 bg-gray ">

<!-- Header Menu 1 -->

	<nav class="header_menu_1 pt-30 pb-30 mt-30">
		<div class="container px-xl-0">
			<div class="row justify-content-center align-items-center f-18 medium">
				<div class="col-lg-3 logo right" data-aos-duration="600"
                     data-aos="fade-down" data-aos-delay="1200"> Air Pollution Statistical management</div>

				<div class="col-lg-6 text-right" data-aos-duration="600" data-aos="fade-down" data-aos-delay="900">
					<a href="{% url 'home' %}" class="link color-heading mx-15">Home</a>
					<a href="{% url 'Search' %}" class="link color-heading mx-15">Search</a>
					<a href="{% url 'about' %}" class="link color-heading mx-15">About</a>
				</div>
                <!--
				<div class="col-lg-3 col-md-4 col-sm-6 d-flex justify-content-end align-items-center" data-aos-duration="600" data-aos="fade-down" data-aos-delay="1200">
					<a href="#" class="mr-20 link color-heading">Sign In</a>
					<a href="#" class="btn sm action-1">Sign Up</a>
				</div>
				-->
			</div>
		</div>
	</nav>
<div  id='map'  style='height:700px;' >
    <span class="border-top border-dark"></span>
<link  rel="stylesheet"  href="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.css"  />
<script  src="http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js"></script>

<script>
      var  OSM_URL  =  'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
      var  OSM_ATTRIB  =  '&copy;  <a  href="http://openstreetmap.org/copyright">OpenStreetMap</a>  contributors';
      var  osmLayer  =  L.tileLayer(OSM_URL,  {attribution:  OSM_ATTRIB});

      var  WAQI_URL    =  "https://tiles.waqi.info/tiles/asean-pm10/{z}/{x}/{y}.png?token=72a90b92bac9607c021156f37ddc61a1d1938b5c";
      var  WAQI_ATTR  =  'Air  Quality  Tiles  &copy;  <a  href="http://waqi.info">waqi.info</a>';
      var  waqiLayer  =  L.tileLayer(WAQI_URL,  {attribution:  WAQI_ATTR});

      var  map  =  L.map('map').setView([20.5937,  78.9629], 5);
      map.addLayer(osmLayer).addLayer(waqiLayer);
</script>
</div>
	<div class="container">
		<h1 class="big text-center mt-25" data-aos-duration="600" data-aos="fade-down" data-aos-delay="0">Air Quality Index</h1>
		<div class=" mt-50 color-heading" data-aos-duration="600" data-aos="fade-down" data-aos-delay="300">

			<ol class="mt-10" >
                <li>Air Quality Index is a tool for effective communication of air quality status to people in terms, which are easy to understand.
                It transforms complex air quality data of various pollutants into a single number (index value),
                nomenclature and colour.</li>
                <li class="mt-20">There are six AQI categories, namely Good + Satisfactory, Moderately polluted, Poor, Very  Poor,  and  Severe.
                Each  of  these  categories  is  decided  based  on  ambient concentration values of air pollutants and their likely
                health impacts (known as health breakpoints). </li>
            </ol>

        </div>




        <div class="mt-30 text-center " data-aos-duration="600" data-aos="fade-down" data-aos-delay="300" >
            {% if access_records %}
                            <table class="table table-responsive text-center" style="width: fit-content">
                  <thead class="thead-dark">
                    <tr>
                      <th scope="col">Srno</th>
                      <th scope="col">Quality</th>
                      <th scope="col">PM10_low</th>
                      <th scope="col">PM10_high</th>
                        <th scope="col">PM2.5_low</th>
                        <th scope="col">PM2.5_high</th>
                        <th scope="col">NO2_low</th>
                        <th scope="col">NO2_high</th>
                        <th scope="col">O3_low</th>
                        <th scope="col">O3_high</th>
                        <th scope="col">CO_low</th>
                        <th scope="col">CO_high</th>
                    </tr>
                  </thead>
                  <tbody>


                  {% for acc in access_records%}

                    <tr class= {{ quality.pop }}>
                      <th scope="row">{{ acc.id }}</th>
                      <td><b>{{ acc.Quality }}</b></td>
                        <td>{{ acc.PM10_low }}</td>
                        <td>{{ acc.PM10_high }}</td>
                        <td>{{ acc.PM2_5_low }}</td>
                        <td>{{ acc.PM2_5_high }}</td>
                        <td>{{ acc.NO2_low }}</td>
                        <td>{{ acc.NO2_high }}</td>
                        <td>{{ acc.O3_low }}</td>
                        <td>{{ acc.O3_high }}</td>
                        <td>{{ acc.CO_low }}</td>
                        <td>{{ acc.CO_high }}</td>

                    </tr>
                  </tbody>
                  {% endfor %}
                </table>
            {% else %}
                <p>NO ACCESS RECORDS FOUND!</p>
            {% endif %}

        </div>

    <div class="mt-30 text-center " data-aos-duration="600" data-aos="fade-down" data-aos-delay="300" style="width: 100%">
        <div id="container" style="width: auto">

            <script src="https://code.highcharts.com/highcharts.src.js"></script>
          <script>
                        Highcharts.chart('container', {
                chart: {
                    type: 'column',
                    zoomType: 'xy'
                },

                title: {
                    text: 'Air Quality Index city wise'
                },
                subtitle: {
                    text: 'Annual AVG'
                },
                xAxis: {
                    title: {
                        enabled: true,
                        text: 'City'
                    },
                    categories: [
                        {% for entry in aqi_list %}'{{ entry.City_id }} '{% if not forloop.last %}, {% endif %}{% endfor %}
                      ],
                    startOnTick: true,
                    endOnTick: true,
                    showLastLabel: true
                },
                yAxis: {
                    title: {
                        text: 'AQI Level'
                    }
                },
                legend: {
                    layout: 'vertical',
                    align: 'left',
                    verticalAlign: 'top',
                    x: 10,
                    y: 50,
                    floating: true,
                    backgroundColor: Highcharts.defaultOptions.chart.backgroundColor,
                    borderWidth: 1
                },
                plotOptions: {
                    scatter: {
                        marker: {
                            radius: 5,
                            states: {
                                hover: {
                                    enabled: true,
                                    lineColor: 'rgb(100,100,100)'
                                }
                            }
                        },
                        states: {
                            hover: {
                                marker: {
                                    enabled: false
                                }
                            }
                        },
                        tooltip: {
                            headerFormat: '<b>{series.name}</b><br>',
                            pointFormat: '{point.y} '
                        }
                    }
                },
                series: [{
                    name: 'AQI',
                    color: 'rgba(223, 83, 83, .5)',

                    data: [ {% for entry in aqi_list %}{{ entry.Index}}{% if not forloop.last %}, {% endif %}{% endfor %}]

                }, ]
            });
          </script>
        </div>




        </div>







	</div>


</header>
<!-- forms alerts -->


<!-- Bootstrap 4.3.1 JS -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
<!-- Fancybox 3 jQuery plugin JS (Open images and video in popup) -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<!-- Google maps JS API -->
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyDP6Ex5S03nvKZJZSvGXsEAi3X_tFkua4U"></script>
<!-- Slick 1.8.1 jQuery plugin JS (Sliders) -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
<!-- AOS 2.3.4 jQuery plugin JS (Animations) -->
<script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
<!-- Startup 3 JS (Custom js for all blocks) -->
<script src="{% static 'js/script.js' %}"></script>

</body>
</html>
